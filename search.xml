<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>基于less提供的modifyVars实现主题切换</title>
      <link href="/blog/2019/11/12/%E5%9F%BA%E4%BA%8Eless%E6%8F%90%E4%BE%9B%E7%9A%84modifyVars%E5%AE%9E%E7%8E%B0%E4%B8%BB%E9%A2%98%E5%88%87%E6%8D%A2/"/>
      <url>/blog/2019/11/12/%E5%9F%BA%E4%BA%8Eless%E6%8F%90%E4%BE%9B%E7%9A%84modifyVars%E5%AE%9E%E7%8E%B0%E4%B8%BB%E9%A2%98%E5%88%87%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://github.com/ElemeFE/element/issues/3054" target="_blank" rel="noopener">https://github.com/ElemeFE/element/issues/3054</a></p><p><a href="https://blog.csdn.net/weixin_30872671/article/details/98286899" target="_blank" rel="noopener">https://blog.csdn.net/weixin_30872671/article/details/98286899</a> - 使用 css/less 动态更换主题色（换肤功能）</p><p><a href="https://www.cnblogs.com/starof/p/5226739.html" target="_blank" rel="noopener">https://www.cnblogs.com/starof/p/5226739.html</a> - less 简单入门</p><h2 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h2><p>使用 less 提供的 modifyVars 的方式来实现。<br><a href="http://lesscss.org/usage/#using-less-in-the-browser-modify-variables" target="_blank" rel="noopener">http://lesscss.org/usage/#using-less-in-the-browser-modify-variables</a></p><p>modifyVars 方法是是基于 less 在浏览器中的编译来实现。所以在引入 less 文件的时候需要通过 link 方式引入，然后基于 less.js 中的方法来进行修改变量。</p><p><a href="https://github.com/yemuguliunian/notes/tree/master/practice/theme-preview" target="_blank" rel="noopener">代码实现</a></p><a id="more"></a><h3 id="index-html-引入主题色文件-和-less-js"><a href="#index-html-引入主题色文件-和-less-js" class="headerlink" title="index.html 引入主题色文件 和 less.js"></a>index.html 引入主题色文件 和 less.js</h3><p>less 样式文件一定要在引入 less.js 前先引入。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// color.less</span><br><span class="line">@backgroud-color: #108ee9;</span><br><span class="line"></span><br><span class="line">.ant-btn &#123;</span><br><span class="line">    background-color: @backgroud-color;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// index.html</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet/less&quot; type=&quot;text/css&quot; href=&quot;./resources/style/color.less&quot; /&gt;</span><br><span class="line">    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.3/less.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br></pre></td></tr></table></figure><h3 id="更改主题色事件"><a href="#更改主题色事件" class="headerlink" title="更改主题色事件"></a>更改主题色事件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">less.modifyVars(&#123;</span><br><span class="line">    '@backgroud-color': #000</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>通过 less modifyVars 修改变量来达到换主题的效果。其本质上是样式覆盖。</p><p>less.js 会 把 color.less 浏览器编译成 行内样式 即 F12 查看 index.html 可发现</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet/less"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"./resources/style/color.less"</span> /&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">id</span>=<span class="string">"less:resources-style-color"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.ant-btn</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#108ee9</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.3/less.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>       </span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure><p>调用 modifyVars 后重新编译为</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet/less"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"./resources/style/color.less"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">id</span>=<span class="string">"less:resources-style-color"</span>&gt;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.ant-btn</span> &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#000</span>;</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.3/less.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure><p>本质上是对页面 <code>ant-btn</code> 类属性 <code>background-color</code> 一个覆盖操作。</p><p><strong><code>index.html</code> 行内样式中的 <code>ant-btn</code> 类属性 <code>background-color</code> 覆盖页面中的 <code>ant-btn</code> 类属性 <code>background-color</code></strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// demo.html</span><br><span class="line">&lt;button class=&quot;ant-btn&quot;&gt;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">// demo.css</span><br><span class="line">.ant-btn &#123;</span><br><span class="line">    background-color: #108ee9;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注：执行 modifyVars 时， color.less 文件本身没有任何变更，编译时传入修改变量所对应的值</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
